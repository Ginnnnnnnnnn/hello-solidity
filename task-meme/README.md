# Meme 代币
Meme 代币是 SHIB 风格代币合约，核心机制包括代币税、流动性池和交易限制等功能。

## 一、代币税机制分析

### 1. 作用与目标
- 平滑价格波动：在买卖时征税，抑制短线频繁博弈，提升持有成本，降低瞬时冲击。
- 建设公共池：将税费用于销毁、营销、流动性建设，形成“使用即供给”的反馈回路。
- 激励长期持有：通过较低的转账税与较高的卖出税，倾向持仓与做市。

### 2. 征税方式与调控逻辑
|征收方式|经济目标|实战案例|
|--------|--------|--------|
|交易税（买卖双向）| - 10%税率可抑制短线抛压 <br> - 5%以下维持流动性|Shiba Inu：0.3%交易税分配至质押池|
|持有税（时间衰减）| - 鼓励长期持仓 <br> - 持币超90天税率降至1%|HEX：持币时间越长分红权重越高|
|定向分配税| - 50%税收注入LP池 <br> - 30%回购销毁 <br> - 20%开发者基金|BabyDoge：5%交易税自动回购+LP增持|

### 3. 取舍与风险
税率过高将伤害成交深度与做市意愿；过低则无法形成公共资金池与激励，应结合流动性、用户规模与传播节奏动态调整。
税率＞15%将显著削弱交易意愿（如2022年FLOKI税率调整至15%后日交易量下降62%）

## 二、流动性池原理探究

### 1. AMM 基本原理
- 以常乘不变（如 x*y=k）做市，价格由池子两侧资产相对数量决定，撮合由合约自动完成。
- 与订单簿的区别：无挂单簿与做市商报价，价格连续可交易，滑点取决于池子深度。

### 2. 流动性提供者（LP）
- 向池中按比例存入两种资产，获得 LP 份额凭证，按交易量获得手续费分成。
- 风险：无常损失（价格偏离初始比值时相对持有单边更亏），极端行情/攻击可能导致池子单边化。

### 3. 深入解析与比喻
**订单簿：传统的“集市”模式**

想象一个古老的集市。
- **买家**喊：“我出100块买一个苹果！”（**Bid**）
- **卖家**喊：“我有一个苹果，卖105块！”（**Ask**）
- 当买卖双方的价格达成一致时，交易就发生了。
- **做市商**就像是那些一直待在集市里的摊贩，他们同时报出买入价和卖出价（例如：“我100块收苹果，105块卖苹果”），通过这个价差赚钱，并为市场提供了持续的流动性。

**AMM：自动的“无人售货机”模式**

想象一个无人售货机，里面放着可乐（Token A）和钱（Token B）。
- **规则**：售货机规定，**可乐的数量 * 钱的数量 = 一个固定常数（k）**。
- **初始状态**：有10瓶可乐和100块钱，所以 `10 * 100 = 1000`。
- **你想买可乐**：你投入5块钱。现在机子里有105块钱。为了保持 `k=1000`，可乐的数量必须变为 `1000 / 105 ≈ 9.52`。
- **结果**：机子找你 `10 - 9.52 = 0.48` 瓶可乐。你用了5块钱买了0.48瓶可乐，等效价格约为 `5 / 0.48 ≈ 10.41` 元/瓶。
- **关键**：价格不是人定的，而是由你**交易行为改变了池子比例**而自动计算出来的。你买得越多，可乐就越贵（**滑点**）。

## 三、交易限制策略探讨

### 1. 核心防御矩阵
|限制类型|技术实现|攻击防护效果|
|--------|-------|-----------|
|单笔上限（≤总供应量0.1%）|`require(amount <= maxTxAmount)`|阻断鲸鱼一次性砸盘|
|持仓限额（≤5%总供应量）|映射表实时监控地址余额|防止控盘操纵|
|冷却周期（≥10分钟）|交易时间戳比对|抑制闪电贷攻击频率|

### 2. 参数权衡分析
- 越严格的限制越能抑制短线操纵，但也会影响真实用户流畅交易与做市效率。
- 频率限制需持久化计数，会增加链上存储与 gas；建议提供临时开关与调参能力。
- 运营成熟后可逐步放宽或全部取消限制，维持最小化干预。

## 四、环境准备
- node.js
- .env 文件，包含 
    - SEPOLIA_URL：sepolia 测试网部署地址
    - ETHERSCAN_KEY：Etherscan API 密钥
    - PRIVATE_KEY：钱包账户私钥，用于部署合约和交易
## 五、安装与编译
- npm install 初始化环境
- npx hardhat compile 编译合约
## 六、测试与部署
- npx hardhat test 测试合约
- npx hardhat deploy 部署合约
- npx hardhat verify 验证合约
